<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enspider - Website Accessibility Monitor</title>
  <link rel="stylesheet" href="/styles.css?v=2">
</head>
<body>
  <header>
    <div class="header-content">
      <h1>ğŸ•·ï¸ Enspider</h1>
      <p class="subtitle">Website Accessibility Monitor</p>
    </div>
    <div class="header-actions">
      <button id="startScanBtn" class="btn btn-primary">ğŸš€ New Scan</button>
      <button id="refreshBtn" class="btn btn-secondary">ğŸ”„ Refresh</button>
      <button id="deleteAllBtn" class="btn btn-danger">ğŸ—‘ï¸ Delete All</button>
    </div>
  </header>

  <main>
    <!-- Scan Progress Modal -->
    <div id="progressModal" class="modal">
      <div class="modal-content" style="max-width: 800px;">
        <div class="modal-header">
          <h2>Scan in Progress</h2>
          <button class="close-btn" onclick="closeProgressModal()">&times;</button>
        </div>
        <div class="modal-body">
          <div id="progressContent">
            <p id="progressDomain" style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem;"></p>

            <div class="progress-bar-container">
              <div class="progress-bar">
                <div id="progressBarFill" class="progress-bar-fill"></div>
              </div>
              <span id="progressPercent" class="progress-percent">0%</span>
            </div>

            <div id="progressDetails" style="margin-top: 1.5rem;">
              <div id="progressStep" style="font-weight: 600; margin-bottom: 0.5rem;"></div>
              <div id="progressCurrentPage" style="color: #718096; font-size: 0.9rem; margin-bottom: 0.5rem;"></div>
              <div id="progressPageInfo" style="display: none; color: #4a5568; font-size: 0.875rem; padding: 0.5rem; background: #f7fafc; border-radius: 6px; margin-bottom: 0.5rem;"></div>
              <div id="progressScreenshotInfo" style="display: flex; gap: 0.5rem; margin-top: 0.5rem;"></div>
            </div>

            <div id="progressStats" style="margin-top: 1.5rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
              <div style="text-align: center;">
                <div id="progressPages" style="font-size: 1.5rem; font-weight: bold; color: #667eea;">0/0</div>
                <div style="font-size: 0.75rem; color: #718096;">Pages</div>
              </div>
              <div style="text-align: center;">
                <div id="progressIssues" style="font-size: 1.5rem; font-weight: bold; color: #e53e3e;">0</div>
                <div style="font-size: 0.75rem; color: #718096;">Issues</div>
              </div>
              <div style="text-align: center;">
                <div id="progressTime" style="font-size: 1.5rem; font-weight: bold; color: #38a169;">0s</div>
                <div style="font-size: 0.75rem; color: #718096;">Time</div>
              </div>
            </div>

            <!-- Logs Section -->
            <div style="margin-top: 1.5rem;">
              <h4 style="font-size: 0.875rem; font-weight: 600; color: #4a5568; margin-bottom: 0.5rem;">ğŸ“‹ Server Logs</h4>
              <div id="progressLogs" style="background: #1a202c; color: #a0aec0; padding: 1rem; border-radius: 8px; font-family: 'Monaco', 'Menlo', monospace; font-size: 0.75rem; max-height: 400px; overflow-y: auto; line-height: 1.5;">
                <div class="log-entry">Waiting for logs...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scan Modal -->
    <div id="scanModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Start New Scan</h2>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Select Domains:</label>
          <div style="margin-bottom: 1rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" class="domain-checkbox" value="en.guazi.com" checked>
              <span>en.guazi.com</span>
            </label>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" class="domain-checkbox" value="ar.guazi.com">
              <span>ar.guazi.com</span>
            </label>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" class="domain-checkbox" value="fr.guazi.com">
              <span>fr.guazi.com</span>
            </label>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" class="domain-checkbox" value="ru.guazi.com">
              <span>ru.guazi.com</span>
            </label>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" class="domain-checkbox" value="es.guazi.com">
              <span>es.guazi.com</span>
            </label>
            <label style="display: flex; align-items: center; gap: 0.5rem;">
              <input type="checkbox" id="selectAllDomains">
              <span style="font-weight: 600;">Select All</span>
            </label>
          </div>
          <button id="confirmScanBtn" class="btn btn-primary">Start Scan</button>
        </div>
      </div>
    </div>

    <!-- Test History -->
    <section class="test-history">
      <h2>Test History</h2>
      <div id="testList" class="test-list">Loading...</div>
    </section>

    <!-- Test Details -->
    <section id="testDetails" class="test-details" style="display: none;">
      <div class="details-header">
        <h2>Test Results</h2>
        <div style="display: flex; gap: 1rem;">
          <button id="deleteTestBtn" class="btn btn-danger" style="background: #e53e3e; border-color: #e53e3e;">ğŸ—‘ï¸ Delete Test</button>
          <button id="backBtn" class="btn btn-secondary">â† Back to List</button>
        </div>
      </div>

      <div class="summary">
        <div class="summary-card">
          <h3>Summary</h3>
          <div class="summary-stats">
            <div class="stat">
              <span class="stat-label">Pages Tested:</span>
              <span id="totalPages" class="stat-value">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Issues Found:</span>
              <span id="totalIssues" class="stat-value error">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Categories:</span>
              <span id="categories" class="stat-value">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Duration:</span>
              <span id="duration" class="stat-value">0s</span>
            </div>
          </div>
        </div>
      </div>

      <div class="filter-section">
        <label>Filter by page type:</label>
        <select id="pageTypeFilter">
          <option value="all">All</option>
          <option value="homepage">Homepage</option>
          <option value="detail">Detail Pages</option>
          <option value="list">List Pages</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div id="pageResults" class="page-results"></div>
    </section>
  </main>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <span class="lightbox-close">&times;</span>
    <img class="lightbox-content" src="" alt="Screenshot">
    <div class="lightbox-info"></div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
